{
  "version": 3,
  "sources": ["browser-route-module:C:\\Users\\sandr\\Desktop\\awp-spring-2022\\lesson-05\\remix-shopping-with-api\\app\\routes\\toys\\new.jsx?browser", "../../../../app/routes/toys/new.jsx"],
  "sourcesContent": ["export { default } from \"C:\\\\Users\\\\sandr\\\\Desktop\\\\awp-spring-2022\\\\lesson-05\\\\remix-shopping-with-api\\\\app\\\\routes\\\\toys\\\\new.jsx\";", "import { Link, redirect, Form, json, useActionData } from \"remix\";\r\nimport Button from \"~/components/Button.jsx\";\r\nimport PageHeader from \"~/components/PageHeader\";\r\nimport Breadcrumb from \"~/components/Breadcrumb.jsx\";\r\nimport db from \"~/db/toys/db.server\";\r\n\r\nexport const action = async ({ request, params }) => {\r\n  const form = await request.formData();\r\n  const title = form.get(\"title\");\r\n  const description = form.get(\"description\");\r\n  const price = form.get(\"price\");\r\n  const image = form.get(\"image\");\r\n  const category = form.get(\"category\");\r\n  const rating = form.get(\"rating\");\r\n\r\n  const uuid = new Date().getTime().toString(16);\r\n\r\n  const errors = {};\r\n  if (!title) errors.title = true;\r\n  if (!description) errors.description = true;\r\n  if (!price) errors.price = true;\r\n  if (!image) errors.image = true;\r\n  if (!category) errors.category = true;\r\n  if (!rating) errors.rating = true;\r\n\r\n  if (Object.keys(errors).length) {\r\n    const values = Object.fromEntries(form);\r\n    return json({ errors, values });\r\n  }\r\n\r\n  if (form.get(\"_method\") === \"post\") {\r\n    await fetch(`http://localhost:3000/api/toys`, {\r\n      method: \"POST\",\r\n      body: JSON.stringify({\r\n        title,\r\n        description,\r\n        price,\r\n        image,\r\n        category,\r\n        rating,\r\n        id: uuid,\r\n      }),\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    });\r\n    return redirect(`/toys/${uuid}`);\r\n  }\r\n};\r\n\r\nexport default function NewProduct() {\r\n  const actionData = useActionData();\r\n\r\n  \r\n  return (\r\n    <>\r\n      <Breadcrumb links={[{ to: \"/toys\", title: \"Toys\" }]} />\r\n      <PageHeader title=\"New product\" subtitle=\"Make it a good one\" />\r\n      <div>\r\n        <Form reloadDocument method=\"post\" className=\"w-64\">\r\n          <Label htmlFor=\"title\">Title</Label>\r\n          <input\r\n            type=\"text\"\r\n            name=\"title\"\r\n            id=\"title\"\r\n            className=\"border p-1 border-gray-200 w-full\"\r\n            defaultValue={actionData?.values.title}\r\n          />\r\n\r\n          {actionData?.errors.title ? (\r\n            <p style={{ color: \"red\" }}>Title is missing</p>\r\n          ) : null}\r\n\r\n          <Label htmlFor=\"category\">Category</Label>\r\n          <input\r\n            type=\"text\"\r\n            name=\"category\"\r\n            id=\"category\"\r\n            className=\"border p-1 border-gray-200 w-full\"\r\n            defaultValue={actionData?.values.category}\r\n          />\r\n\r\n          {actionData?.errors.category ? (\r\n            <p style={{ color: \"red\" }}>Category is missing</p>\r\n          ) : null}\r\n\r\n          <Label htmlFor=\"description\">Description</Label>\r\n          <textarea\r\n            name=\"description\"\r\n            id=\"description\"\r\n            className=\"border p-1 border-gray-200 w-full\"\r\n            defaultValue={actionData?.values.description}\r\n          ></textarea>\r\n\r\n          {actionData?.errors.description ? (\r\n            <p style={{ color: \"red\" }}>Description is missing</p>\r\n          ) : null}\r\n\r\n          <Label htmlFor=\"image\">Image</Label>\r\n          <input\r\n            type=\"text\"\r\n            name=\"image\"\r\n            id=\"image\"\r\n            className=\"border p-1 border-gray-200 w-full\"\r\n            defaultValue={actionData?.values.image}\r\n          />\r\n\r\n          {actionData?.errors.image ? (\r\n            <p style={{ color: \"red\" }}>Image is missing</p>\r\n          ) : null}\r\n\r\n          <Label htmlFor=\"rating\">Rating</Label>\r\n          <input\r\n            type=\"text\"\r\n            name=\"rating\"\r\n            id=\"rating\"\r\n            className=\"border p-1 border-gray-200 w-full\"\r\n          />\r\n\r\n          {actionData?.errors.rating ? (\r\n            <p style={{ color: \"red\" }}>Rating is missing</p>\r\n          ) : null}\r\n\r\n          <Label htmlFor=\"price\">Price</Label>\r\n          <input\r\n            type=\"text\"\r\n            name=\"price\"\r\n            title=\"price\"\r\n            className=\"border p-1 border-gray-200 w-full\"\r\n            defaultValue={actionData?.values.price}\r\n          />\r\n\r\n          {actionData?.errors.price ? (\r\n            <p style={{ color: \"red\" }}>Price is missing</p>\r\n          ) : null}\r\n\r\n          <input type=\"hidden\" name=\"_method\" value=\"post\" />\r\n          <div className=\"mt-3\">\r\n            <Button type=\"submit\">Add product</Button>\r\n          </div>\r\n        </Form>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nfunction Label({ children, ...rest }) {\r\n  return (\r\n    <label className=\"block font-semibold mt-3 mb-1\" {...rest}>\r\n      {children}\r\n    </label>\r\n  );\r\n}\r\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;AAAA;;;ACAA;AAIA,gBAAe;AA8CA,sBAAsB;AACnC,QAAM,aAAa;AAGnB,SACE,0DACE,oCAAC,YAAD;AAAA,IAAY,OAAO,CAAC,EAAE,IAAI,SAAS,OAAO;AAAA,MAC1C,oCAAC,YAAD;AAAA,IAAY,OAAM;AAAA,IAAc,UAAS;AAAA,MACzC,oCAAC,OAAD,MACE,oCAAC,MAAD;AAAA,IAAM,gBAAc;AAAA,IAAC,QAAO;AAAA,IAAO,WAAU;AAAA,KAC3C,oCAAC,OAAD;AAAA,IAAO,SAAQ;AAAA,KAAQ,UACvB,oCAAC,SAAD;AAAA,IACE,MAAK;AAAA,IACL,MAAK;AAAA,IACL,IAAG;AAAA,IACH,WAAU;AAAA,IACV,cAAc,YAAY,OAAO;AAAA,MAGlC,YAAY,OAAO,QAClB,oCAAC,KAAD;AAAA,IAAG,OAAO,EAAE,OAAO;AAAA,KAAS,sBAC1B,MAEJ,oCAAC,OAAD;AAAA,IAAO,SAAQ;AAAA,KAAW,aAC1B,oCAAC,SAAD;AAAA,IACE,MAAK;AAAA,IACL,MAAK;AAAA,IACL,IAAG;AAAA,IACH,WAAU;AAAA,IACV,cAAc,YAAY,OAAO;AAAA,MAGlC,YAAY,OAAO,WAClB,oCAAC,KAAD;AAAA,IAAG,OAAO,EAAE,OAAO;AAAA,KAAS,yBAC1B,MAEJ,oCAAC,OAAD;AAAA,IAAO,SAAQ;AAAA,KAAc,gBAC7B,oCAAC,YAAD;AAAA,IACE,MAAK;AAAA,IACL,IAAG;AAAA,IACH,WAAU;AAAA,IACV,cAAc,YAAY,OAAO;AAAA,MAGlC,YAAY,OAAO,cAClB,oCAAC,KAAD;AAAA,IAAG,OAAO,EAAE,OAAO;AAAA,KAAS,4BAC1B,MAEJ,oCAAC,OAAD;AAAA,IAAO,SAAQ;AAAA,KAAQ,UACvB,oCAAC,SAAD;AAAA,IACE,MAAK;AAAA,IACL,MAAK;AAAA,IACL,IAAG;AAAA,IACH,WAAU;AAAA,IACV,cAAc,YAAY,OAAO;AAAA,MAGlC,YAAY,OAAO,QAClB,oCAAC,KAAD;AAAA,IAAG,OAAO,EAAE,OAAO;AAAA,KAAS,sBAC1B,MAEJ,oCAAC,OAAD;AAAA,IAAO,SAAQ;AAAA,KAAS,WACxB,oCAAC,SAAD;AAAA,IACE,MAAK;AAAA,IACL,MAAK;AAAA,IACL,IAAG;AAAA,IACH,WAAU;AAAA,MAGX,YAAY,OAAO,SAClB,oCAAC,KAAD;AAAA,IAAG,OAAO,EAAE,OAAO;AAAA,KAAS,uBAC1B,MAEJ,oCAAC,OAAD;AAAA,IAAO,SAAQ;AAAA,KAAQ,UACvB,oCAAC,SAAD;AAAA,IACE,MAAK;AAAA,IACL,MAAK;AAAA,IACL,OAAM;AAAA,IACN,WAAU;AAAA,IACV,cAAc,YAAY,OAAO;AAAA,MAGlC,YAAY,OAAO,QAClB,oCAAC,KAAD;AAAA,IAAG,OAAO,EAAE,OAAO;AAAA,KAAS,sBAC1B,MAEJ,oCAAC,SAAD;AAAA,IAAO,MAAK;AAAA,IAAS,MAAK;AAAA,IAAU,OAAM;AAAA,MAC1C,oCAAC,OAAD;AAAA,IAAK,WAAU;AAAA,KACb,oCAAC,QAAD;AAAA,IAAQ,MAAK;AAAA,KAAS;AAAA;AAQlC,eAAe,EAAE,aAAa,QAAQ;AACpC,SACE,oCAAC,SAAD;AAAA,IAAO,WAAU;AAAA,OAAoC;AAAA,KAClD;AAAA;",
  "names": []
}
